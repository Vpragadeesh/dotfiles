# --- CPU: performance on AC, power saving on BAT ---
CPU_SCALING_GOVERNOR_ON_AC=performance
CPU_SCALING_GOVERNOR_ON_BAT=powersave

# Use energy/perf policy when supported by driver/HW
CPU_ENERGY_PERF_POLICY_ON_AC=performance
CPU_ENERGY_PERF_POLICY_ON_BAT=power

# Turbo / boost
CPU_BOOST_ON_AC=1
CPU_BOOST_ON_BAT=0
CPU_HWP_DYN_BOOST_ON_AC=1
CPU_HWP_DYN_BOOST_ON_BAT=0

# Limit max perf on battery to reduce power & heat (percent of max)
CPU_MIN_PERF_ON_AC=0
CPU_MAX_PERF_ON_AC=100
CPU_MIN_PERF_ON_BAT=0
CPU_MAX_PERF_ON_BAT=20

# --- Disks ---
# List your disks here (change if needed). SSDs ignore spindown.
DISK_DEVICES="nvme0n1 sda"

# APM: 254 = max performance (AC), 1 = max power saving (BAT) for HDDs
DISK_APM_LEVEL_ON_AC="254 254"
DISK_APM_LEVEL_ON_BAT="1 1"

# Spindown: 0 = disabled for system disk; set timeout for secondary HDDs
DISK_SPINDOWN_TIMEOUT_ON_AC="0 0"
DISK_SPINDOWN_TIMEOUT_ON_BAT="0 60"

# I/O scheduler (blk-mq): keep recommended mq-deadline
DISK_IOSCHED="mq-deadline mq-deadline"

# SATA link power: best balance on BAT, max performance on AC
SATA_LINKPWR_ON_AC="max_performance"
SATA_LINKPWR_ON_BAT="min_power"
AHCI_RUNTIME_PM_ON_AC=off
AHCI_RUNTIME_PM_ON_BAT=on
AHCI_RUNTIME_PM_TIMEOUT=5

# --- PCIe / runtime PM / ASPM ---
# Allow runtime power management on battery; prefer performance on AC
RUNTIME_PM_ON_AC=off
RUNTIME_PM_ON_BAT=on
PCIE_ASPM_ON_AC=performance
PCIE_ASPM_ON_BAT=powersave

# --- USB ---
USB_AUTOSUSPEND=1
USB_EXCLUDE_AUDIO=1        # keep audio devices responsive
USB_EXCLUDE_BTUSB=0       # allow BT autosuspend (0 = allow autosuspend)
USB_EXCLUDE_PHONE=0       # allow phone to suspend when plugged (saves power)
USB_EXCLUDE_PRINTER=0

# --- Audio ---
SOUND_POWER_SAVE_ON_BAT=1
SOUND_POWER_SAVE_CONTROLLER=Y

# --- Wireless ---
WIFI_PWR_ON_BAT=on

# --- Safety notes / small tuning ---
# - Keep defaults for input devices; TLP excludes input devices by default.
# - If you have unstable devices after autosuspend, add them to USB_DENYLIST or USB_ALLOWLIST as appropriate.
# - For Intel HWP/EPP or amd-pstate features, TLP will apply available options when the kernel supports them.
